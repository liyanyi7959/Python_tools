# Python_tools
python脚本工具

# 空文件夹.gitkeep自动生成脚本 README.md

## 功能介绍

该Python脚本用于解决SVN代码库迁移Git时的空文件夹保留问题，可**安全遍历指定目录及其子目录**，自动识别所有空文件夹并创建 `.gitkeep` 文件，确保Git能跟踪并保留原有的目录结构。脚本具备严格的路径范围控制，避免误扫描系统磁盘，同时支持Windows和Linux跨平台使用。

## 核心特性

- 分阶段处理：先识别所有空目录，再统一创建文件，避免边改边判的逻辑误差
- 精准空目录判断：仅处理完全空的目录，跳过已含 `.gitkeep` 文件的目录
- 安全防护：处理前需用户确认目录，严格限制扫描范围，防止越界访问
- 权限兼容：自动忽略无访问权限的系统目录，避免执行中断
- 跨平台支持：适配Windows和Linux的路径格式，无需修改代码

## 安装要求

- 运行环境：Python 3.5 及以上版本
- 依赖：无额外第三方库，直接使用Python标准库（os、sys、platform）

## 使用步骤

### 1. 准备工作

将脚本保存为 `create_gitkeep_safe.py`，放置在任意目录（建议与待处理代码库同目录，方便操作）。

### 2. 运行脚本

打开命令行终端（Windows用CMD/PowerShell，Linux用Terminal），导航到目标代码库根目录，执行以下命令：

#### 场景1：处理当前工作目录（推荐）

```bash
python create_gitkeep_safe.py
```

#### 场景2：处理指定目录（需输入绝对路径或相对路径）

```bash
# Windows示例（处理D盘学习目录下的demo文件夹）
python create_gitkeep_safe.py D:\03_学习\demo

# Linux示例（处理/home/user/code目录）
python create_gitkeep_safe.py /home/user/code
```

### 3. 操作确认

脚本运行后会显示待处理的目录路径，需手动输入 `y` 或 `yes` 确认后才会执行，避免误操作：

```
警告：即将处理以下目录及其所有子目录：
   D:\03_学习\demo
是否继续？(y/n)：y
```

## 参数说明

| 参数位置  | 参数作用                         | 可选/必选 | 示例                                   |
| --------- | -------------------------------- | --------- | -------------------------------------- |
| 第1个参数 | 指定待处理的根目录路径           | 可选      | `D:\03_学习\demo` 或 `/home/user/code` |
| 无参数    | 默认处理当前命令行所在的工作目录 | -         | -                                      |

## 注意事项

1. 目录范围限制：脚本仅处理指定根目录及其子目录，不会扫描其他磁盘或系统目录
2. 权限说明：对无访问权限的目录（如系统隐藏目录）会自动跳过，不影响整体执行
3. 重复执行安全：已含 `.gitkeep` 的目录不会重复创建文件，可多次运行无副作用
4. Windows路径特殊处理：自动验证驱动器路径（仅支持C:/、D:/、E:/、F:/），非标准路径会自动更正为当前工作目录

## 常见问题

### Q1：脚本提示“目录不存在”怎么办？

- 检查输入的路径是否正确，避免拼写错误
- Windows系统需注意路径分隔符（可用 `\` 或 `/`，如 `D:/03_学习/demo`）
- 确保目录路径中无特殊字符（如空格需直接保留，无需转义）

### Q2：部分目录提示“创建.gitkeep时出错”？

- 大概率是目录无写入权限，手动确认该目录的读写权限后重试
- 若为系统保护目录，可忽略该错误（脚本会继续处理其他目录）

### Q3：为什么有的空目录没创建.gitkeep？

- 检查目录是否真的为空（需不含任何文件和子目录）
- 若目录中已存在 `.gitkeep` 文件，脚本会自动跳过

## 免责声明

1. 建议先在测试目录验证脚本功能，再用于正式代码库
2. 执行前请备份重要目录，避免因异常情况导致数据问题
3. 脚本仅创建 `.gitkeep` 文件，不会删除任何原有文件或目录